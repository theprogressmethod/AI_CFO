<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>n8n AI Node Setup Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f3f4f6;
            padding: 2rem;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        h1 {
            color: #1e293b;
            margin-bottom: 2rem;
            text-align: center;
        }
        .card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .card h2 {
            color: #334155;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .prompt-box {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 1rem 0;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .config-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem;
            border-bottom: 1px solid #f3f4f6;
        }
        .config-item:last-child {
            border-bottom: none;
        }
        .config-label {
            font-weight: 600;
            color: #475569;
        }
        .config-value {
            color: #0ea5e9;
            font-family: 'Courier New', monospace;
        }
        .copy-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: background 0.2s;
        }
        .copy-btn:hover {
            background: #2563eb;
        }
        .copy-btn:active {
            background: #1d4ed8;
        }
        .tip {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.375rem;
        }
        .tip-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 0.25rem;
        }
        .code-inline {
            background: #f1f5f9;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .steps {
            counter-reset: step-counter;
            margin: 1rem 0;
        }
        .step {
            counter-increment: step-counter;
            padding: 0.75rem 0;
            padding-left: 2.5rem;
            position: relative;
            border-bottom: 1px solid #f3f4f6;
        }
        .step::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0.75rem;
            background: #3b82f6;
            color: white;
            width: 1.75rem;
            height: 1.75rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ n8n AI Transform Data Node Setup</h1>

        <div class="card">
            <h2>üìù System Prompt</h2>
            <p>Copy this exactly into the "System Message" field:</p>
            <div class="prompt-box" id="system-prompt">You are a financial data transformation expert. Your task is to:
1. Transform financial statement data into a standardized long format
2. Ensure consistent account naming and categorization
3. Parse and standardize dates
4. Handle any data quality issues
5. Return structured JSON data

Always explain any decisions you make about data transformation or error handling.</div>
            <button class="copy-btn" onclick="copyToClipboard('system-prompt')">Copy System Prompt</button>
        </div>

        <div class="card">
            <h2>üí¨ User Prompt</h2>
            <p>Copy this exactly into the "User Message" field:</p>
            <div class="prompt-box" id="user-prompt">Transform this financial data into a standardized format:

{{ JSON.stringify($json.processedData, null, 2) }}

Errors encountered: {{ JSON.stringify($json.errors, null, 2) }}

Output format should be:
{
  "transformedData": [
    {
      "date": "YYYY-MM-DD",
      "year": YYYY,
      "month": MM,
      "statementType": "Income Statement|Balance Sheet",
      "accountCode": "XXX",
      "accountName": "Name",
      "value": 00000,
      "percent": 0.00
    }
  ],
  "transformationNotes": [],
  "decisions": []
}</div>
            <button class="copy-btn" onclick="copyToClipboard('user-prompt')">Copy User Prompt</button>
        </div>

        <div class="card">
            <h2>‚öôÔ∏è Configuration Settings</h2>
            <div class="config-item">
                <span class="config-label">Model:</span>
                <span class="config-value">gpt-4-turbo-preview</span>
            </div>
            <div class="config-item">
                <span class="config-label">Temperature:</span>
                <span class="config-value">0.3</span>
            </div>
            <div class="config-item">
                <span class="config-label">Max Tokens:</span>
                <span class="config-value">4096</span>
            </div>
            <div class="config-item">
                <span class="config-label">Response Format:</span>
                <span class="config-value">JSON Object</span>
            </div>
        </div>

        <div class="card">
            <h2>üöÄ Setup Steps in n8n</h2>
            <div class="steps">
                <div class="step">Open your n8n workflow at <strong>http://localhost:5678</strong></div>
                <div class="step">Find the <strong>"AI Transform Data"</strong> node (should be an OpenAI node)</div>
                <div class="step">Double-click to open the node settings</div>
                <div class="step">In <strong>"Resource"</strong>, select <span class="code-inline">Message a Model</span></div>
                <div class="step">In <strong>"Model"</strong>, select <span class="code-inline">gpt-4-turbo-preview</span> (or <span class="code-inline">gpt-3.5-turbo</span> for cost savings)</div>
                <div class="step">Copy the <strong>System Prompt</strong> into the "System Message" field</div>
                <div class="step">Copy the <strong>User Prompt</strong> into the "User Message" field</div>
                <div class="step">Under <strong>"Options"</strong>, set Temperature to <span class="code-inline">0.3</span></div>
                <div class="step">Set Max Tokens to <span class="code-inline">4096</span></div>
                <div class="step">If available, set Response Format to <span class="code-inline">JSON Object</span></div>
                <div class="step">Add your <strong>OpenAI API Key</strong> in the credentials section</div>
                <div class="step">Click <strong>"Save"</strong></div>
                <div class="step">Toggle the workflow to <strong>"Active"</strong> in the top right</div>
            </div>
        </div>

        <div class="card">
            <h2>üí° Tips</h2>
            <div class="tip">
                <div class="tip-title">Model Selection:</div>
                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                    <li><strong>GPT-4-turbo:</strong> Best accuracy, ~$0.01 per transformation</li>
                    <li><strong>GPT-3.5-turbo:</strong> Good for MVP, ~$0.001 per transformation</li>
                    <li><strong>GPT-4:</strong> Most accurate but expensive, ~$0.03 per transformation</li>
                </ul>
            </div>
            <div class="tip">
                <div class="tip-title">Important:</div>
                The <span class="code-inline">{{ }}</span> syntax in the prompt is n8n's way of referencing data from previous nodes. Don't change this!
            </div>
            <div class="tip">
                <div class="tip-title">Testing:</div>
                Use the "Execute Node" button to test with sample data before activating the full workflow.
            </div>
        </div>

        <div class="card">
            <h2>üîë Getting an OpenAI API Key</h2>
            <ol style="margin-left: 1.5rem;">
                <li>Go to <a href="https://platform.openai.com/api-keys" target="_blank">https://platform.openai.com/api-keys</a></li>
                <li>Sign in or create an account</li>
                <li>Click "Create new secret key"</li>
                <li>Copy the key (it starts with <span class="code-inline">sk-</span>)</li>
                <li>Add it to n8n in the credentials section</li>
            </ol>
        </div>
    </div>

    <script>
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const button = element.nextElementSibling;
                const originalText = button.textContent;
                button.textContent = '‚úì Copied!';
                button.style.background = '#10b981';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#3b82f6';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy. Please select and copy manually.');
            });
        }
    </script>
</body>
</html>
